"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[72659],{47609:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"reference/test/property-testing/getting-started","title":"Getting Started With Property Checking","description":"The fundamental idea behind property checking is to test the properties of the target function using random inputs.","source":"@site/docs/reference/test/property-testing/getting-started.md","sourceDirName":"reference/test/property-testing","slug":"/reference/test/property-testing/getting-started","permalink":"/reference/test/property-testing/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/reference/test/property-testing/getting-started.md","tags":[],"version":"current","frontMatter":{"id":"getting-started","title":"Getting Started With Property Checking","sidebar_label":"Getting Started"},"sidebar":"reference-sidebar","previous":{"title":"Introduction To Property Testing","permalink":"/reference/test/property-testing/"},"next":{"title":"How Generators Work?","permalink":"/reference/test/property-testing/how-generators-work"}}');var r=n(74848),i=n(28453);const a={id:"getting-started",title:"Getting Started With Property Checking",sidebar_label:"Getting Started"},o=void 0,d={},c=[{value:"Number of Samples",id:"number-of-samples",level:2}];function p(e){const t={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"The fundamental idea behind property checking is to test the properties of the target function using random inputs."}),"\n",(0,r.jsx)(t.p,{children:"So to test a system using property checking, two things are required:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Properties"}),"\n",(0,r.jsx)(t.li,{children:"Generators"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["A property of a system is a predicate that is always true regardless of the system's input. For example, the addition of two numbers is commutative. So it doesn't matter what numbers we pass to the addition function, for any pair of ",(0,r.jsx)(t.code,{children:"a"})," and ",(0,r.jsx)(t.code,{children:"b"}),", the result of ",(0,r.jsx)(t.code,{children:"add(a, b)"})," is always the same as ",(0,r.jsx)(t.code,{children:"add(b, a)"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"def add(a: Int, b: Int): Int = ???\n\ndef is_add_commutative(a: Int, b: Int): Boolean =\n  add(a, b) == add(b, a)\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"is_add_commutative"})," predicate takes two inputs and checks if the ",(0,r.jsx)(t.code,{children:"add"})," function is commutative or not. To check this property, we need some random integer pairs. This is where generators come in."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"Gen[A]"})," data type is used to generate random values of type ",(0,r.jsx)(t.code,{children:"A"}),". ZIO Test provides numerous ",(0,r.jsx)(t.code,{children:"Gen"})," instances for common types:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"import zio.test._\n\nval intGen: Gen[Any, Int] = Gen.int\nval stringGen: Gen[Sized, String] = Gen.string\n"})}),"\n",(0,r.jsx)(t.p,{children:"It is also composable, so we can combine them to generate random values of more complex types:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"val stringIntGen: Gen[Sized, (String, Int)] = stringGen <*> intGen\n\ncase class Person(name: String, age: Int)\nval personGen: Gen[Sized, Person] = stringIntGen.map(Person.tupled)\n"})}),"\n",(0,r.jsxs)(t.p,{children:["ZIO Test provides the ",(0,r.jsx)(t.code,{children:"check"})," function for this purpose. It takes a list of generators and provides them to another taken function, which is a property checker:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"def property[T1, T2](input1: T1, input2: T2, ...): Boolean = ???\n\nval input1Gen: Gen[_, T1] = ???\nval input2Gen: Gen[_, T2] = ???\n\ncheck(input1Gen, input2Gen, ...) { (input1, input2, ...) =>\n  assertTrue(property(input1, input2, ...))   \n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["In our example, the ",(0,r.jsx)(t.code,{children:"is_add_commutative"})," predicate takes two inputs. So we need to pass two generators of type ",(0,r.jsx)(t.code,{children:"Int"})," to the ",(0,r.jsx)(t.code,{children:"check"})," function:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:'def add(a: Int, b: Int): Int = ???\n\ntest("add is commutative") {\n  check(Gen.int, Gen.int) { (a, b) =>\n    assertTrue(add(a, b) == add(b, a))\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"number-of-samples",children:"Number of Samples"}),"\n",(0,r.jsxs)(t.p,{children:["In the previous example, we used ",(0,r.jsx)(t.code,{children:"check"})," to test if the ",(0,r.jsx)(t.code,{children:"add"})," function is commutative. In other words, we try to generate samples of random pairs of integers and try to falsify the ",(0,r.jsx)(t.code,{children:"is_add_commutative"})," predicate. If we find a pair of integers that falsifies the predicate, then we know that the property is violated."]}),"\n",(0,r.jsxs)(t.p,{children:["By default, the ",(0,r.jsx)(t.code,{children:"check"})," function, try to generate 200 samples. We can change this by using the ",(0,r.jsx)(t.code,{children:"sample"})," test aspect:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:'import zio.test._\n\nobject AdditionSpec extends ZIOSpecDefault {\n  def spec =\n    test("add is commutative") {\n      check(Gen.int, Gen.int) { (a, b) =>\n        assertTrue(add(a, b) == add(b, a))\n      }\n    } @@ TestAspect.samples(10)\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["To debug the test, we added a ",(0,r.jsx)(t.code,{children:"println"})," statement inside the ",(0,r.jsx)(t.code,{children:"check"})," function to see the generated samples."]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var s=n(96540);const r={},i=s.createContext(r);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);