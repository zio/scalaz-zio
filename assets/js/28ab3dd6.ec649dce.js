"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[78183],{84985:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"zio-actors/basics","title":"Basics","description":"Actors are higher level concurrency models which receive messages, process them and update their internal state.","source":"@site/docs/zio-actors/basics.md","sourceDirName":"zio-actors","slug":"/zio-actors/basics","permalink":"/zio-actors/basics","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-actors/basics.md","tags":[],"version":"current","frontMatter":{"id":"basics","title":"Basics"},"sidebar":"ecosystem-sidebar","previous":{"title":"ZIO Actors","permalink":"/zio-actors/"},"next":{"title":"Supervision","permalink":"/zio-actors/supervision"}}');var t=s(74848),r=s(28453);const a={id:"basics",title:"Basics"},o=void 0,c={},d=[{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Actors are higher level concurrency models which receive messages, process them and update their internal state.\nWithin processing actor can spawn finite number of children actors and send finite number of messages to other actors."}),"\n",(0,t.jsx)(n.p,{children:"This can be visualized as a simple diagram:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"diagram",src:s(25670).A+"",width:"730",height:"322"})}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["The basic actors usage requires defining a ",(0,t.jsx)(n.code,{children:"Stateful"})," for describing actor's behavior.\nThen actor's creation is done with passing supervision manner, initial state and mentioned ",(0,t.jsx)(n.code,{children:"Stateful"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Imports required for example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scala",children:"import java.io.File\n\nimport zio.actors.Actor.Stateful\nimport zio.actors._\nimport zio.{UIO, ZIO}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Our domain that will be used:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scala",children:"sealed trait Command[+_]\ncase class DoubleCommand(value: Int) extends Command[Int]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Our actor's assigment will be to double received values. Here's the ",(0,t.jsx)(n.code,{children:"Stateful"})," implementation:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scala",children:"val stateful = new Stateful[Any, Unit, Command] {\n  override def receive[A](state: Unit, msg: Command[A], context: Context): UIO[(Unit, A)] =\n    msg match {\n      case DoubleCommand(value) => ZIO.succeed(((), value * 2))\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then we are ready to instantiate the actor and fire off messages:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scala",children:'for {\n  system  <- ActorSystem("mySystem")\n  actor   <- system.make("actor1", Supervisor.none, (), stateful)\n  doubled <- actor ! DoubleCommand(42)\n} yield doubled\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This is ",(0,t.jsx)(n.code,{children:"fire-and-forget"})," interaction pattern where caller is blocked until recipients confirms enqueueing message in mailbox queue.\nThere's also ",(0,t.jsx)(n.code,{children:"ask"})," interaction pattern where for caller sending a message is completed after receiving response message from recipient.\nIt's performed via ",(0,t.jsx)(n.code,{children:"?"})," method."]}),"\n",(0,t.jsx)(n.p,{children:"From recipient's point of view these two interaction patterns are indistinguishable."}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["For each ",(0,t.jsx)(n.code,{children:"ActorSystem"})," created there should be a config entry in configuration file.\nBy default configuration file is expected to be at ",(0,t.jsx)(n.code,{children:"./src/main/resources/application.conf"}),".\nExemplary configuration entry for an ",(0,t.jsx)(n.code,{children:"ActorSystem"})," named ",(0,t.jsx)(n.code,{children:"Test1"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hocon",children:'Test1.zio.actors.remoting {\n  hostname = "127.0.0.1"\n  port = 1234\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Custom configuration file can be provided when instantiating ",(0,t.jsx)(n.code,{children:"ActorSystem"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-scala",children:'ActorSystem("mySystem", Some(new File("./my/custom/path/app.conf")))\n'})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},25670:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/actor-52da23d423d7d0455323e46319402f08.svg"},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var i=s(96540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);