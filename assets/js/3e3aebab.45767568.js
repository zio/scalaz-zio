"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[9795],{28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>o});var t=n(96540);const l={},s=t.createContext(l);function a(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(s.Provider,{value:i},e.children)}},61299:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"zio-cli/sbt-plugin","title":"ZIO CLI SBT Plugin","description":"Overview","source":"@site/docs/zio-cli/sbt-plugin.md","sourceDirName":"zio-cli","slug":"/zio-cli/sbt-plugin","permalink":"/zio-cli/sbt-plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-cli/sbt-plugin.md","tags":[],"version":"current","frontMatter":{"id":"sbt-plugin","title":"ZIO CLI SBT Plugin","sidebar_label":"SBT Plugin"},"sidebar":"ecosystem-sidebar","previous":{"title":"Bash and Zsh Completion","permalink":"/zio-cli/bash-and-zsh-completion"},"next":{"title":"Advanced example","permalink":"/zio-cli/examples"}}');var l=n(74848),s=n(28453);const a={id:"sbt-plugin",title:"ZIO CLI SBT Plugin",sidebar_label:"SBT Plugin"},o=void 0,c={},r=[{value:"Overview",id:"overview",level:2},{value:"Current State",id:"current-state",level:2},{value:"Native Images",id:"native-images",level:3},{value:"Outstanding Action Items",id:"outstanding-action-items",level:2},{value:"Plugin Settings",id:"plugin-settings",level:2},{value:"zioCliMainClass: Option[String]",id:"zioclimainclass-optionstring",level:3},{value:"zioCliNativeImageOptions: Seq[String]",id:"zioclinativeimageoptions-seqstring",level:3},{value:"zioCliNativeImageReady: () =&gt; Unit",id:"zioclinativeimageready---unit",level:3},{value:"Plugin Tasks",id:"plugin-tasks",level:2},{value:"zioCliBuildNative: Unit",id:"zioclibuildnative-unit",level:3},{value:"zioCliGenerateBashCompletion: Unit",id:"ziocligeneratebashcompletion-unit",level:3},{value:"zioCliGenerateZshCompletion: Unit",id:"ziocligeneratezshcompletion-unit",level:3},{value:"zioCliInstallCli: Unit",id:"ziocliinstallcli-unit",level:3},{value:"End User Project Setup",id:"end-user-project-setup",level:2},{value:"Locally Publishing the Plugin",id:"locally-publishing-the-plugin",level:3},{value:"End User Project",id:"end-user-project",level:3}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:"ZIO CLI"})," offers an SBT plugin to provide some tasks to make generation and deployment of\napplications simple."]}),"\n",(0,l.jsx)(i.h2,{id:"current-state",children:"Current State"}),"\n",(0,l.jsx)(i.p,{children:"The current functionality of the plugin offers:"}),"\n",(0,l.jsx)(i.h3,{id:"native-images",children:"Native Images"}),"\n",(0,l.jsxs)(i.p,{children:["This SBT plugin depends on and utilizes the\n",(0,l.jsx)(i.a,{href:"https://github.com/scalameta/sbt-native-image",children:"sbt-native-image"})," plugin. Tasks and settings\nrelated to building a native image map 1:1 to the upstream plugin."]}),"\n",(0,l.jsx)(i.h2,{id:"outstanding-action-items",children:"Outstanding Action Items"}),"\n",(0,l.jsxs)(i.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(i.li,{className:"task-list-item",children:[(0,l.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Investigate if any cross versions are needed for different versions of SBT"]}),"\n",(0,l.jsxs)(i.li,{className:"task-list-item",children:[(0,l.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Add remaining corresponding upstream configuration options to pass into the ",(0,l.jsx)(i.code,{children:"sbt-native-image"})," plugin."]}),"\n",(0,l.jsxs)(i.li,{className:"task-list-item",children:[(0,l.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,l.jsx)(i.code,{children:"zioCliGenerateBashCompletion"}),", when ready."]}),"\n",(0,l.jsxs)(i.li,{className:"task-list-item",children:[(0,l.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,l.jsx)(i.code,{children:"zioCliGenerateZshCompletion"}),", when ready."]}),"\n",(0,l.jsxs)(i.li,{className:"task-list-item",children:[(0,l.jsx)(i.input,{type:"checkbox",disabled:!0})," ","Implement ",(0,l.jsx)(i.code,{children:"zioCliInstallCli"}),", when ready."]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"plugin-settings",children:"Plugin Settings"}),"\n",(0,l.jsx)(i.h3,{id:"zioclimainclass-optionstring",children:"zioCliMainClass: Option[String]"}),"\n",(0,l.jsxs)(i.p,{children:["The mainClass of the CLI App in the ",(0,l.jsx)(i.code,{children:"Compile"})," scope. Defaults to ",(0,l.jsx)(i.code,{children:"None"}),", and will need to be set."]}),"\n",(0,l.jsx)(i.h3,{id:"zioclinativeimageoptions-seqstring",children:"zioCliNativeImageOptions: Seq[String]"}),"\n",(0,l.jsx)(i.p,{children:"A collection of arguments to pass the native-image builder to customize native image generation. Defaults to"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-scala",children:'List(\n      "--allow-incomplete-classpath",\n      "--report-unsupported-elements-at-runtime",\n      "--initialize-at-build-time",\n      "--no-fallback"\n    )\n'})}),"\n",(0,l.jsx)(i.h3,{id:"zioclinativeimageready---unit",children:"zioCliNativeImageReady: () => Unit"}),"\n",(0,l.jsx)(i.p,{children:"A side-effecting callback that is called the native image is ready. Defaults to"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-scala",children:'() => {\n        println("ZIO CLI App Native Image Ready!")\n      } \n'})}),"\n",(0,l.jsx)(i.h2,{id:"plugin-tasks",children:"Plugin Tasks"}),"\n",(0,l.jsx)(i.h3,{id:"zioclibuildnative-unit",children:"zioCliBuildNative: Unit"}),"\n",(0,l.jsxs)(i.p,{children:["Sets mainClass in Compile, and attempts to run ",(0,l.jsx)(i.code,{children:"nativeImage"})," with any applied ",(0,l.jsx)(i.code,{children:"nativeImageOptions"}),".\nFires ",(0,l.jsx)(i.code,{children:"zioCliNativeImageReady"})," on success."]}),"\n",(0,l.jsx)(i.h3,{id:"ziocligeneratebashcompletion-unit",children:"zioCliGenerateBashCompletion: Unit"}),"\n",(0,l.jsxs)(i.p,{children:["Not currently implemented; prints ",(0,l.jsx)(i.code,{children:'"TODO: Not Implemented!"'})]}),"\n",(0,l.jsx)(i.h3,{id:"ziocligeneratezshcompletion-unit",children:"zioCliGenerateZshCompletion: Unit"}),"\n",(0,l.jsxs)(i.p,{children:["Not currently implemented; prints ",(0,l.jsx)(i.code,{children:'"TODO: Not Implemented!"'})]}),"\n",(0,l.jsx)(i.h3,{id:"ziocliinstallcli-unit",children:"zioCliInstallCli: Unit"}),"\n",(0,l.jsxs)(i.p,{children:["Not currently implemented; prints ",(0,l.jsx)(i.code,{children:'"TODO: Not Implemented!"'})]}),"\n",(0,l.jsx)(i.h2,{id:"end-user-project-setup",children:"End User Project Setup"}),"\n",(0,l.jsx)(i.p,{children:"There are several steps that are needed to use this in an end user project:"}),"\n",(0,l.jsx)(i.h3,{id:"locally-publishing-the-plugin",children:"Locally Publishing the Plugin"}),"\n",(0,l.jsxs)(i.p,{children:["To compile and locally publish a copy of the SBT plugin, simply call  ",(0,l.jsx)(i.code,{children:"publishLocal"})," on the ",(0,l.jsx)(i.code,{children:"sbtZioCli"})," project. Example:"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"sbt> project sbtZioCli\nsbt> publishLocal\n"})}),"\n",(0,l.jsxs)(i.p,{children:["This will locally publish an artifact: ",(0,l.jsx)(i.code,{children:'"zio.cli.sbt" % "sbt-zio-cli" % "0.0.0-SNAPSHOT"'})]}),"\n",(0,l.jsx)(i.h3,{id:"end-user-project",children:"End User Project"}),"\n",(0,l.jsxs)(i.p,{children:["In your project, configure SBT to use the plugin by adding to ",(0,l.jsx)(i.code,{children:"project/plugins.sbt"}),":"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:'addSbtPlugin("zio.cli.sbt" % "sbt-zio-cli" % "0.0.0-SNAPSHOT")\n'})}),"\n",(0,l.jsxs)(i.p,{children:["Then, enable the plugin for your project in your ",(0,l.jsx)(i.code,{children:"build.sbt"})," file. Example:"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:'lazy val root = project\n  .in(file("."))\n  .enablePlugins(ZIOCLIPlugin)\n  .settings(\n    CLIPlugin.zioCliMainClass := Some("zio.cli.YourApp")\n  )\n'})}),"\n",(0,l.jsx)(i.p,{children:"At this point, you should be able to build a native image of your application with the task:"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"sbt> zioCliBuildNative\n"})})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);