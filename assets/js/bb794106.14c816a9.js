"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[61148],{30409:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"ecosystem/community/scala-k8s","title":"Scala k8s","description":"Scala k8s is a Kubernetes client, data models and typesafe manifest generation for scala, scalajs, and scala native.","source":"@site/docs/ecosystem/community/scala-k8s.md","sourceDirName":"ecosystem/community","slug":"/ecosystem/community/scala-k8s","permalink":"/ecosystem/community/scala-k8s","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/ecosystem/community/scala-k8s.md","tags":[],"version":"current","frontMatter":{"id":"scala-k8s","title":"Scala k8s"},"sidebar":"ecosystem-sidebar","previous":{"title":"Rezilience","permalink":"/ecosystem/community/rezilience"},"next":{"title":"tamer","permalink":"/ecosystem/community/tamer"}}');var i=a(74848),t=a(28453);const l={id:"scala-k8s",title:"Scala k8s"},r=void 0,c={},o=[{value:"Introduction",id:"introduction",level:2},{value:"Design principles",id:"design-principles",level:3},{value:"Installation",id:"installation",level:2},{value:"Example",id:"example",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/hnaderi/scala-k8s",children:"Scala k8s"})," is a Kubernetes client, data models and typesafe manifest generation for scala, scalajs, and scala native."]}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"This library provides a full blown extensible client that you can use to interact directly with kubernetes API server, to create operators or accomplish other automation tasks, also you can use it to create or manipulate manifests in scala."}),"\n",(0,i.jsx)(n.h3,{id:"design-principles",children:"Design principles"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"As extensible as possible"}),"\n",(0,i.jsx)(n.li,{children:"As dependency free as possible"}),"\n",(0,i.jsx)(n.li,{children:"As Un-opinionated as possible"}),"\n",(0,i.jsx)(n.li,{children:"Provide seamless integrations"}),"\n",(0,i.jsx)(n.li,{children:"All specs are generated from the spec directly and will be in sync with kubernetes all the time"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["This library is currently available for Scala binary versions 2.12, 2.13 and 3.2 on JVM/JS/Native.",(0,i.jsx)(n.br,{}),"\n","This library is architecured in a microkernel fashion and all the main kubernetes stuff are implemented/generated in pure scala, and integration modules are provided separately.",(0,i.jsx)(n.br,{}),"\n","main modules are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"objects"})," raw kubernetes objects, which has no dependency"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"client"})," raw kubernetes client and requests, requests can also be extended in user land easily!"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Latest version ",(0,i.jsx)(n.a,{href:"https://index.scala-lang.org/hnaderi/scala-k8s/scala-k8s-objects",children:(0,i.jsx)(n.img,{src:"https://index.scala-lang.org/hnaderi/scala-k8s/scala-k8s-objects/latest-by-scala-version.svg?style=flat-square",alt:"Latest version"})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'libraryDependencies ++= Seq(\n  "dev.hnaderi" %% "scala-k8s-objects" % "[VERSION]", // JVM, JS, Native ; raw k8s objects\n  "dev.hnaderi" %% "scala-k8s-client" % "[VERSION]", // JVM, JS, Native ; k8s client kernel and requests\n  )\n'})}),"\n",(0,i.jsx)(n.p,{children:"The following integrations are currently available:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'libraryDependencies ++= Seq(\n  "dev.hnaderi" %% "scala-k8s-http4s" % "[VERSION]", // JVM, JS, Native ; http4s and fs2 integration\n  "dev.hnaderi" %% "scala-k8s-zio" % "[VERSION]", // JVM ; ZIO native integration using zio-http and zio-json \n  "dev.hnaderi" %% "scala-k8s-sttp" % "[VERSION]", // JVM, JS, Native ; sttp integration using jawn parser\n  "dev.hnaderi" %% "scala-k8s-circe" % "[VERSION]", // JVM, JS ; circe integration\n  "dev.hnaderi" %% "scala-k8s-json4s" % "[VERSION]", // JVM, JS, Native; json4s integration\n  "dev.hnaderi" %% "scala-k8s-spray-json" % "[VERSION]", // JVM ; spray-json integration\n  "dev.hnaderi" %% "scala-k8s-play-json" % "[VERSION]", // JVM ; play-json integration\n  "dev.hnaderi" %% "scala-k8s-zio-json" % "[VERSION]", // JVM, JS ; zio-json integration\n  "dev.hnaderi" %% "scala-k8s-jawn" % "[VERSION]", // JVM, JS, Native ; jawn integration\n  "dev.hnaderi" %% "scala-k8s-manifests" % "[VERSION]", // JVM ; yaml manifest generation\n  "dev.hnaderi" %% "scala-k8s-scalacheck" % "[VERSION]" // JVM, JS, Native; scalacheck instances\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This project also has a ",(0,i.jsx)(n.a,{href:"https://github.com/hnaderi/sbt-k8s",children:"sbt integration"})," you can use to generate manifests."]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"We can define any kubernetes object:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import dev.hnaderi.k8s._  // base packages\nimport dev.hnaderi.k8s.implicits._  // implicit coversions and helpers\nimport dev.hnaderi.k8s.manifest._  // manifest syntax\n\nval config = ConfigMap(\n  metadata = ObjectMeta(\n    name = "example",\n    namespace = "staging",\n    labels = Map(\n      Labels.name("example"),\n      Labels.instance("one")\n    )\n  ),\n  data = DataMap(\n    "some config" -> "some value",\n    "config file" -> Data.file("config.json")\n  ),\n  binaryData = DataMap.binary(\n    "blob" -> Data.file("blob.dat"),\n    "blob2" -> Paths.get("blob2.bin"),\n    "other inline data" -> "some other data"\n  )\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["or use ",(0,i.jsx)(n.code,{children:"kubectl"})," style helpers:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'val config2 = ConfigMap(\n  data = DataMap.fromDir(new File("path/to/data-directory"))\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:"And we can connect to our cluster and send requests:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import dev.hnaderi.k8s.client.APIs\nimport dev.hnaderi.k8s.client.ZIOKubernetesClient\n\n// This example uses `kubectl proxy` to simplify authentication\nval client = ZIOKubernetesClient.make("http://localhost:8001")\nval nodes = ZIOKubernetesClient.send(APIs.nodes.list())\n'})}),"\n",(0,i.jsx)(n.p,{children:"Runnable example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import dev.hnaderi.k8s.client._\nimport zio.http.Client\nimport zio._\n\n//NOTE run `kubectl proxy` before running this example\nobject ZIOExample extends ZIOAppDefault {\n  private val app = ZIO.scoped {\n    for {\n      n <- ZIOKubernetesClient.send(APIs.nodes.list())\n      _ <- ZIO.foreach(n.items.map(_.metadata.flatMap(_.name)))(Console.printLine(_))\n    } yield ()\n  }\n\n  override def run =\n    app.provide(\n      Client.default,\n      ZIOBackend.make,\n      ZIOKubernetesClient.make("http://localhost:8001")\n    )\n\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>r});var s=a(96540);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);