"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[18500],{92206:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"zio-ftp/index","title":"ZIO FTP","description":"ZIO FTP is a thin wrapper over (s)Ftp client for ZIO.","source":"@site/docs/zio-ftp/index.md","sourceDirName":"zio-ftp","slug":"/zio-ftp/","permalink":"/zio-ftp/","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-ftp/index.md","tags":[],"version":"current","frontMatter":{"id":"index","title":"ZIO FTP"},"sidebar":"ecosystem-sidebar","previous":{"title":"Transactions","permalink":"/zio-dynamodb/transactions"},"next":{"title":"Environment","permalink":"/zio-ftp/environment"}}');var i=t(74848),o=t(28453);const r={id:"index",title:"ZIO FTP"},a=void 0,l={},c=[{value:"Installation",id:"installation",level:2},{value:"How to use it?",id:"how-to-use-it",level:2},{value:"Example",id:"example",level:2},{value:"Support any commands?",id:"support-any-commands",level:2}];function p(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://zio.dev",children:"ZIO FTP"})," is a thin wrapper over (s)Ftp client for ",(0,i.jsx)(n.a,{href:"https://zio.dev",children:"ZIO"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/zio/zio/wiki/Project-Stages",children:(0,i.jsx)(n.img,{src:"https://img.shields.io/badge/Project%20Stage-Production%20Ready-brightgreen.svg",alt:"Production Ready"})})," ",(0,i.jsx)(n.img,{src:"https://github.com/zio/zio-ftp/workflows/CI/badge.svg",alt:"CI Badge"})," ",(0,i.jsx)(n.a,{href:"https://oss.sonatype.org/content/repositories/releases/dev/zio/zio-ftp_2.13/",children:(0,i.jsx)(n.img,{src:"https://img.shields.io/nexus/r/https/oss.sonatype.org/dev.zio/zio-ftp_2.13.svg?label=Sonatype%20Release",alt:"Sonatype Releases"})})," ",(0,i.jsx)(n.a,{href:"https://oss.sonatype.org/content/repositories/snapshots/dev/zio/zio-ftp_2.13/",children:(0,i.jsx)(n.img,{src:"https://img.shields.io/nexus/s/https/oss.sonatype.org/dev.zio/zio-ftp_2.13.svg?label=Sonatype%20Snapshot",alt:"Sonatype Snapshots"})})," ",(0,i.jsx)(n.a,{href:"https://javadoc.io/doc/dev.zio/zio-ftp-docs_2.13",children:(0,i.jsx)(n.img,{src:"https://javadoc.io/badge2/dev.zio/zio-ftp-docs_2.13/javadoc.svg",alt:"javadoc"})})," ",(0,i.jsx)(n.a,{href:"https://github.com/zio/zio-ftp",children:(0,i.jsx)(n.img,{src:"https://img.shields.io/github/stars/zio/zio-ftp?style=social",alt:"ZIO FTP"})})]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["In order to use this library, we need to add the following line in our ",(0,i.jsx)(n.code,{children:"build.sbt"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'libraryDependencies += "dev.zio" %% "zio-ftp" % "0.4.3" \n'})}),"\n",(0,i.jsx)(n.h2,{id:"how-to-use-it",children:"How to use it?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Imports"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"import zio.ftp._\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FTP"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// FTP\nval unsecureSettings = UnsecureFtpSettings("127.0.0.1", 21, FtpCredentials("foo", "bar"))\n\n//listing files\nFtp.ls("/").runCollect.provideLayer(unsecure(unsecureSettings))\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"FTPS"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'// FTPS\nval secureSettings = SecureFtpSettings("127.0.0.1", 21, FtpCredentials("foo", "bar"))\n\n//listing files\nSFtp.ls("/").runCollect.provideLayer(secure(secureSettings))\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SFTP (support ssh key)"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'val sftpSettings = SecureFtpSettings("127.0.0.1", 22, FtpCredentials("foo", "bar"))\n\n//listing files\nSFtp.ls("/").runCollect.provideLayer(secure(sftpSettings))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"First we need an FTP server, so let's create one:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker run -d \\\n    -p 21:21 \\\n    -p 21000-21010:21000-21010 \\\n    -e USERS="one|1234" \\\n    -e ADDRESS=localhost \\\n    delfer/alpine-ftp-server\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now we can run the example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import zio._\nimport zio.stream._\nimport zio.ftp._\nimport zio.ftp.Ftp._\n\nimport java.io.IOException\n\nobject ZIOFTPExample extends ZIOAppDefault {\n\n  private val settings =\n    UnsecureFtpSettings("127.0.0.1", 21, FtpCredentials("one", "1234"))\n\n  private val myApp: ZIO[Ftp, IOException, Unit] =\n    for {\n      _        <- Console.printLine("List of files at root directory:")\n      resource <- ls("/").runCollect\n      _        <- ZIO.foreach(resource)(e => Console.printLine(e.path))\n      path      = "~/file.txt"\n      _        <- upload(\n                    path,\n                    ZStream.fromChunk(\n                      Chunk.fromArray("Hello, ZIO FTP!\\nHello, World!".getBytes)\n                    )\n                  )\n      file     <- readFile(path)\n                    .via(ZPipeline.utf8Decode)\n                    .runCollect\n      _        <- Console.printLine(s"Content of $path file:")\n      _        <- Console.printLine(file.mkString)\n    } yield ()\n\n  override def run = myApp.provideSomeLayer(unsecure(settings))\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"support-any-commands",children:"Support any commands?"}),"\n",(0,i.jsx)(n.p,{children:"If you need a method which is not wrapped by the library, you can have access to underlying FTP client in a safe manner by using"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"import zio._\n\ntrait FtpAccessors[+A] {\n  def execute[T](f: A => T): ZIO[Any, IOException, T]\n} \n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);