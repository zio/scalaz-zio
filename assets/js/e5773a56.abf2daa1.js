"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[23626],{5401:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"zio-dynamodb/reference/hi-level-api/crud-operations/update","title":"update","description":"The update operation is used to modify an existing item in a table. Both KeyConditionExpr.PrimaryKeyExpr and the Action params can be created using the ProjectionExpression\'s in the companion object for model class:","source":"@site/docs/zio-dynamodb/reference/hi-level-api/crud-operations/update.md","sourceDirName":"zio-dynamodb/reference/hi-level-api/crud-operations","slug":"/zio-dynamodb/reference/hi-level-api/crud-operations/update","permalink":"/zio-dynamodb/reference/hi-level-api/crud-operations/update","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-dynamodb/reference/hi-level-api/crud-operations/update.md","tags":[],"version":"current","frontMatter":{"id":"update","title":"update"},"sidebar":"ecosystem-sidebar","previous":{"title":"get","permalink":"/zio-dynamodb/reference/hi-level-api/crud-operations/get"},"next":{"title":"deleteFrom","permalink":"/zio-dynamodb/reference/hi-level-api/crud-operations/delete"}}');var r=n(74848),d=n(28453);const i={id:"update",title:"update"},o=void 0,a={},c=[{value:"<code>update</code> expressions",id:"update-expressions",level:2},{value:"<code>update</code> query operations",id:"update-query-operations",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"def update[From: Schema](tableName: String)(primaryKeyExpr: KeyConditionExpr.PrimaryKeyExpr[From])(\n    action: Action[From]\n): DynamoDBQuery[From, Option[From]]  = ???\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"update"})," operation is used to modify an existing item in a table. Both ",(0,r.jsx)(t.code,{children:"KeyConditionExpr.PrimaryKeyExpr"})," and the ",(0,r.jsx)(t.code,{children:"Action"})," params can be created using the ",(0,r.jsx)(t.code,{children:"ProjectionExpression"}),"'s in the companion object for model class:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:'for {\n  _ <- DynamoDBQuery.update("person")(Person.id.primaryKey === "1")(\n    Person.name.set(42) + Person.age.set(42)\n  ).execute\n} yield maybePerson\n'})}),"\n",(0,r.jsxs)(t.h2,{id:"update-expressions",children:[(0,r.jsx)(t.code,{children:"update"})," expressions"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"action"}),(0,r.jsx)(t.th,{children:"description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"+"})}),(0,r.jsxs)(t.td,{children:["combines update actions eg ",(0,r.jsx)(t.code,{children:"Person.name.set(42) + Person.age.set(42)"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"set"})}),(0,r.jsxs)(t.td,{children:["Set an attribute ",(0,r.jsx)(t.code,{children:'Person.name.set("John")'})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"setIfNotExists"})}),(0,r.jsxs)(t.td,{children:["Set attribute if it does not exists ",(0,r.jsx)(t.code,{children:'Person.name.setIfNotExists("John")'})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"appendList"})}),(0,r.jsx)(t.td,{children:"Add supplied list to the end of this list attribute"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"prepend"})}),(0,r.jsx)(t.td,{children:"Prepend an element to a list attribute"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"prependList"})}),(0,r.jsx)(t.td,{children:"Prepend a list to list attribute"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"deleteFromSet"})}),(0,r.jsx)(t.td,{children:"delete all elements that match the supplied set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"add(a: To)"})}),(0,r.jsx)(t.td,{children:"adds this value as a number attribute if it does not exists, else adds the numeric value to the existing attribute"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"addSet"})}),(0,r.jsx)(t.td,{children:"Adds this set as an attribute if it does not exists, else if it exists it adds the elements of the set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"remove(index: Int)"})}),(0,r.jsx)(t.td,{children:"remove an element at the specified index"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"remove"})}),(0,r.jsx)(t.td,{children:"Removes this path expression from an item"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["See ",(0,r.jsx)(t.a,{href:"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.UpdateExpressions.html",children:"AWS API Reference"})," to learn more about update expressions."]}),"\n",(0,r.jsxs)(t.h3,{id:"update-query-operations",children:[(0,r.jsx)(t.code,{children:"update"})," query operations"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:"<UPDATE_QUERY>\n  .returns(<ReturnValues>) // ReturnValues.AllNew | ReturnValues.AllOld | ReturnValues.None <default>\n  .where(<ConditionExpression>)\n"})})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(96540);const r={},d=s.createContext(r);function i(e){const t=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(d.Provider,{value:t},e.children)}}}]);