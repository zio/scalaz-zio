"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[50030],{3662:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>d,default:()=>f,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"reference/test/aspects/before-after-around","title":"Before, After, and Around Test Aspects","description":"1. We can run an effect before, after, or around every test:","source":"@site/docs/reference/test/aspects/before-after-around.md","sourceDirName":"reference/test/aspects","slug":"/reference/test/aspects/before-after-around","permalink":"/reference/test/aspects/before-after-around","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/reference/test/aspects/before-after-around.md","tags":[],"version":"current","frontMatter":{"id":"before-after-around","title":"Before, After, and Around Test Aspects","sidebar_label":"Before, After, and Around"},"sidebar":"reference-sidebar","previous":{"title":"Test Aspects","permalink":"/reference/test/aspects/"},"next":{"title":"Conditional Aspects","permalink":"/reference/test/aspects/conditional"}}');var r=s(74848),c=s(28453);const o={id:"before-after-around",title:"Before, After, and Around Test Aspects",sidebar_label:"Before, After, and Around"},d=void 0,i={},a=[];function l(e){const t={code:"code",em:"em",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["We can run an effect ",(0,r.jsx)(t.em,{children:"before"}),", ",(0,r.jsx)(t.em,{children:"after"}),", or ",(0,r.jsx)(t.em,{children:"around"})," every test:"]}),"\n"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"TestAspect.before"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"TestAspect.after"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"TestAspect.afterFailure"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"TestAspect.afterSuccess"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"TestAspect.around"})}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-scala",children:'import zio._\nimport zio.test.{ test, _ }\n\ntest("before and after") {\n  for {\n    tmp <- System.env("TEMP_DIR")\n  } yield assertTrue(tmp.contains("/tmp/test"))\n} @@ TestAspect.before(\n  TestSystem.putEnv("TEMP_DIR", s"/tmp/test")\n) @@ TestAspect.after(\n  System.env("TEMP_DIR").flatMap(deleteDir)\n)\n'})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"TestAspect.aroundTest"})," takes a scoped resource and evaluates every test within the context of the scoped function."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["There are also ",(0,r.jsx)(t.code,{children:"TestAspect.beforeAll"}),", ",(0,r.jsx)(t.code,{children:"TestAspect.afterAll"}),", ",(0,r.jsx)(t.code,{children:"afterAllFailure"}),", ",(0,r.jsx)(t.code,{children:"afterAllSuccess"}),", and ",(0,r.jsx)(t.code,{children:"TestAspect.aroundAll"})," variants."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Using ",(0,r.jsx)(t.code,{children:"TestAspect.aroundWith"})," and ",(0,r.jsx)(t.code,{children:"TestAspect.aroundAllWith"})," we can evaluate every test or all test between two given effects, ",(0,r.jsx)(t.code,{children:"before"})," and ",(0,r.jsx)(t.code,{children:"after"}),", where the result of the ",(0,r.jsx)(t.code,{children:"before"})," effect can be used in the ",(0,r.jsx)(t.code,{children:"after"})," effect."]}),"\n"]}),"\n"]})]})}function f(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>d});var n=s(96540);const r={},c=n.createContext(r);function o(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);