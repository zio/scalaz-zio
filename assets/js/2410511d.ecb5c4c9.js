"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[3339],{24569:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>a,frontMatter:()=>d,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"zio-aws/configuration","title":"Configuration","description":"Common configuration","source":"@site/docs/zio-aws/configuration.md","sourceDirName":"zio-aws","slug":"/zio-aws/configuration","permalink":"/zio-aws/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-aws/configuration.md","tags":[],"version":"current","frontMatter":{"id":"configuration","title":"Configuration"},"sidebar":"ecosystem-sidebar","previous":{"title":"Wrappers","permalink":"/zio-aws/wrappers"},"next":{"title":"HTTP","permalink":"/zio-aws/http"}}');var r=t(74848),s=t(28453);const d={id:"configuration",title:"Configuration"},o="Configuration",l={},c=[{value:"Common configuration",id:"common-configuration",level:2},{value:"Default",id:"default",level:4},{value:"Fully customized",id:"fully-customized",level:4},{value:"Configured",id:"configured",level:4},{value:"Configuration Details",id:"configuration-details",level:2},{value:"Field Descriptions",id:"field-descriptions",level:3},{value:"Field Descriptions",id:"field-descriptions-1",level:3},{value:"client",id:"client",level:3},{value:"extraHeaders",id:"extraheaders",level:3},{value:"Service layer",id:"service-layer",level:2}];function h(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,r.jsx)(i.h2,{id:"common-configuration",children:"Common configuration"}),"\n",(0,r.jsxs)(i.p,{children:["Each ",(0,r.jsx)(i.em,{children:"service module"})," depends on the ",(0,r.jsx)(i.code,{children:"AwsConfig"})," layer. This layer is responsible for setting up the\nAWS Java SDK's async client, by setting the ",(0,r.jsx)(i.a,{href:"/zio-aws/http",children:"underlying HTTP engine"})," and all the common\nsettings. You can use the following layers to provide ",(0,r.jsx)(i.code,{children:"AwsConfig"}),":"]}),"\n",(0,r.jsx)(i.h4,{id:"default",children:"Default"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:"AwsConfig.default"})," requires a ",(0,r.jsx)(i.code,{children:"HttpClient"})," as dependency, but does not customize any other setting of the client"]}),"\n",(0,r.jsx)(i.h4,{id:"fully-customized",children:"Fully customized"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:"AwsConfig.customized(customization)"})," gives the freedom to customize the creation of the AWS async client directly by modifying it's ",(0,r.jsx)(i.code,{children:"Builder"})]}),"\n",(0,r.jsx)(i.h4,{id:"configured",children:"Configured"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:"AwsConfig.configured()"})," is the ",(0,r.jsx)(i.em,{children:"recommended"})," way to construct an ",(0,r.jsx)(i.code,{children:"AwsConfig"}),". Beside requiring a ",(0,r.jsx)(i.code,{children:"HttpClient"})," it also has ",(0,r.jsx)(i.code,{children:"ZConfig[CommonAwsConfig]"})," as dependency.\nThe ",(0,r.jsx)(i.code,{children:"CommonAwsConfig"})," value can be either provided from code for example by ",(0,r.jsx)(i.code,{children:"ZLayer.succeed(CommonAwsConfig(...))"})," or it can\nbe read from any of the supported config sources by ",(0,r.jsx)(i.a,{href:"https://zio.dev/zio-config/",children:"zio-config"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["Note that ",(0,r.jsx)(i.strong,{children:"AWS level retries are disabled"})," by the configuration layer and it is not exposed in the ",(0,r.jsx)(i.code,{children:"CommonAwsConfig"})," data structure either. The reason for this is that the recommended way to handle retries is to use ",(0,r.jsx)(i.a,{href:"/zio-aws/aspects",children:"aspects on the service layers"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["See the following table about the possible configuration values. Please note that the underlying HTTP engine also has its own\nspecific configuration which is described ",(0,r.jsx)(i.a,{href:"/zio-aws/http",children:"on the page about the HTTP engines"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"configuration-details",children:"Configuration Details"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"FieldName"}),(0,r.jsx)(i.th,{children:"Format"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Sources"})]})}),(0,r.jsx)(i.tbody,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"fielddescriptions",children:"all-of"})}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{})]})})]}),"\n",(0,r.jsx)(i.h3,{id:"field-descriptions",children:"Field Descriptions"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"FieldName"}),(0,r.jsx)(i.th,{children:"Format"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Sources"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"region"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a text property, AWS region to connect to"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"fielddescriptions-1",children:"any-one-of"})}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"endpointOverride"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a text property, Overrides the AWS service endpoint"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"client",children:"client"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"client",children:"all-of"})}),(0,r.jsx)(i.td,{children:"Common settings for AWS service clients"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"field-descriptions-1",children:"Field Descriptions"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"FieldName"}),(0,r.jsx)(i.th,{children:"Format"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Sources"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"type"}),(0,r.jsx)(i.td,{children:"map"}),(0,r.jsx)(i.td,{children:"a text property, AWS credentials provider"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a constant property, AWS credentials provider"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"client",children:"client"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"FieldName"}),(0,r.jsx)(i.th,{children:"Format"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Sources"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"extraheaders",children:"extraHeaders"})}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.a,{href:"extraheaders",children:"list"})}),(0,r.jsx)(i.td,{children:"Extra headers to be sent with each request"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"apiCallTimeout"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a duration property, Amount of time to allow the client to complete the execution of an API call"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"apiCallAttemptTimeout"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a duration property, Amount of time to wait for the HTTP request to complete before giving up"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"defaultProfileName"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a text property, Default profile name"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"extraheaders",children:"extraHeaders"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"FieldName"}),(0,r.jsx)(i.th,{children:"Format"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Sources"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"name"}),(0,r.jsx)(i.td,{children:"primitive"}),(0,r.jsx)(i.td,{children:"a text property, Header name"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"value"}),(0,r.jsx)(i.td,{children:"list"}),(0,r.jsx)(i.td,{children:"a text property, Header value"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"service-layer",children:"Service layer"}),"\n",(0,r.jsxs)(i.p,{children:["Each AWS service's generated client has it own layer that depends on ",(0,r.jsx)(i.code,{children:"AwsConfig"}),". It is possible to reuse the same ",(0,r.jsx)(i.code,{children:"AwsConfig"})," layer\nfor multiple AWS service clients, sharing a common configuration. Usually the service client does not require any additional configuration,\nin this case the ",(0,r.jsx)(i.code,{children:"live"})," layer can be used, for example:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-scala",children:"program.provide(\n    awsConfig,\n    Ec2.live,\n    ElasticBeanstalk.live\n)\n"})})]})}function a(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>d,x:()=>o});var n=t(96540);const r={},s=n.createContext(r);function d(e){const i=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);