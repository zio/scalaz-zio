"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[97257],{14471:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>n,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"zio-streams-compress/index","title":"Compression and archives with zio-streams","description":"ZIO Streams Compress integrates several compression algorithms and","source":"@site/docs/zio-streams-compress/index.md","sourceDirName":"zio-streams-compress","slug":"/zio-streams-compress/","permalink":"/zio-streams-compress/","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/zio-streams-compress/index.md","tags":[],"version":"current","frontMatter":{"id":"index","title":"Compression and archives with zio-streams","sidebar_label":"ZIO Streams Compress"},"sidebar":"ecosystem-sidebar","previous":{"title":"Combining Different Encoders","permalink":"/zio-schema/examples/combining-different-encoders"},"next":{"title":"ZIO Telemetry","permalink":"/zio-telemetry/"}}');var o=r(74848),t=r(28453);const n={id:"index",title:"Compression and archives with zio-streams",sidebar_label:"ZIO Streams Compress"},a=void 0,c={},l=[{value:"Installation",id:"installation",level:2},{value:"Example",id:"example",level:3},{value:"Running the tests",id:"running-the-tests",level:2}];function m(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://github.com/zio/zio-streams-compress",children:"ZIO Streams Compress"})," integrates several compression algorithms and\narchive formats with ",(0,o.jsx)(s.a,{href:"https://zio.dev",children:"ZIO Streams"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://github.com/zio/zio/wiki/Project-Stages",children:(0,o.jsx)(s.img,{src:"https://img.shields.io/badge/Project%20Stage-Production%20Ready-brightgreen.svg",alt:"Production Ready"})})," ",(0,o.jsx)(s.img,{src:"https://github.com/zio/zio-streams-compress/workflows/CI/badge.svg",alt:"CI Badge"})," ",(0,o.jsx)(s.a,{href:"https://oss.sonatype.org/content/repositories/releases/dev/zio/zio-streams-compress-docs_2.13/",children:(0,o.jsx)(s.img,{src:"https://img.shields.io/nexus/r/https/oss.sonatype.org/dev.zio/zio-streams-compress-docs_2.13.svg?label=Sonatype%20Release",alt:"Sonatype Releases"})})," ",(0,o.jsx)(s.a,{href:"https://oss.sonatype.org/content/repositories/snapshots/dev/zio/zio-streams-compress-docs_2.13/",children:(0,o.jsx)(s.img,{src:"https://img.shields.io/nexus/s/https/oss.sonatype.org/dev.zio/zio-streams-compress-docs_2.13.svg?label=Sonatype%20Snapshot",alt:"Sonatype Snapshots"})})," ",(0,o.jsx)(s.a,{href:"https://javadoc.io/doc/dev.zio/zio-streams-compress-docs_2.13",children:(0,o.jsx)(s.img,{src:"https://javadoc.io/badge2/dev.zio/zio-streams-compress-docs_2.13/javadoc.svg",alt:"javadoc"})})," ",(0,o.jsx)(s.a,{href:"https://github.com/zio/zio-streams-compress",children:(0,o.jsx)(s.img,{src:"https://img.shields.io/github/stars/zio/zio-streams-compress?style=social",alt:"ZIO Streams Compress docs"})})," ",(0,o.jsx)(s.a,{href:"https://scala-steward.org",children:(0,o.jsx)(s.img,{src:"https://img.shields.io/badge/Scala_Steward-helping-blue.svg?style=flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAMAAAARSr4IAAAAVFBMVEUAAACHjojlOy5NWlrKzcYRKjGFjIbp293YycuLa3pYY2LSqql4f3pCUFTgSjNodYRmcXUsPD/NTTbjRS+2jomhgnzNc223cGvZS0HaSD0XLjbaSjElhIr+AAAAAXRSTlMAQObYZgAAAHlJREFUCNdNyosOwyAIhWHAQS1Vt7a77/3fcxxdmv0xwmckutAR1nkm4ggbyEcg/wWmlGLDAA3oL50xi6fk5ffZ3E2E3QfZDCcCN2YtbEWZt+Drc6u6rlqv7Uk0LdKqqr5rk2UCRXOk0vmQKGfc94nOJyQjouF9H/wCc9gECEYfONoAAAAASUVORK5CYII=",alt:"Scala Steward badge"})})]}),"\n",(0,o.jsx)(s.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsxs)(s.p,{children:["In order to use this library, we need to add one of the following line in our ",(0,o.jsx)(s.code,{children:"build.sbt"})," file:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-sbt",children:'libraryDependencies += "dev.zio" %% "zio-streams-compress-brotli" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-brotli4j" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-bzip2" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-gzip" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-lz4" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-tar" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-zip" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-zip4j" % "1.0.0"\nlibraryDependencies += "dev.zio" %% "zio-streams-compress-zstd" % "1.0.0"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["For Brotli you can choose between the 'brotli' and the 'brotli4j' version. The first is based on the official Java\nlibrary but only does decompression. The second is based on ",(0,o.jsx)(s.a,{href:"https://github.com/hyperxpro/Brotli4j",children:"Brotli4J"})," which does\ncompression and decompression."]}),"\n",(0,o.jsx)(s.p,{children:"For ZIP files you can choose between the 'zip' and the 'zip4j' version. The first allows you to tweak the compression\nlevel, while the second allows you work with password-protected ZIP files."}),"\n",(0,o.jsx)(s.p,{children:"Currently only jvm is supported. PRs for scala-js and scala-native are welcome."}),"\n",(0,o.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-scala",children:'// Example.sc\n// Run with: scala-cli Example.sc\n//> using dep dev.zio:zio-streams-compress-gzip:1.0.0\n//> using dep dev.zio:zio-streams-compress-tar:1.0.0\n//> using dep dev.zio:zio-streams-compress-zip4j:1.0.0\n\nimport zio._\nimport zio.compress.{ArchiveEntry, GzipCompressor, GzipDecompressor, TarUnarchiver, Zip4JArchiver}\nimport zio.stream._\n\nimport java.nio.charset.StandardCharsets.UTF_8\n\nobject ExampleApp extends ZIOAppDefault {\n  override def run: ZIO[Any, Any, Any] =\n    for {\n      // Compress a file with GZIP\n      _ <- ZStream\n             .fromFileName("file")\n             .via(GzipCompressor.compress)\n             .run(ZSink.fromFileName("file.gz"))\n\n      // List all items in a gzip tar archive:\n      _ <- ZStream\n             .fromFileName("file.tgz")\n             .via(GzipDecompressor.decompress)\n             .via(TarUnarchiver.unarchive)\n             .mapZIO { case (archiveEntry, contentStream) =>\n               for {\n                 content <- contentStream.runCollect\n                 _ <- Console.printLine(s"${archiveEntry.name} ${content.length}")\n               } yield ()\n             }\n             .runDrain\n\n      // Create an encrypted ZIP archive\n      _ <- ZStream(archiveEntry("file1.txt", "Hello world!".getBytes(UTF_8)))\n             .via(Zip4JArchiver(password = Some("it is a secret")).archive)\n             .run(ZSink.fromFileName("file.zip"))\n    } yield ()\n\n  private def archiveEntry(\n    name: String,\n    content: Array[Byte],\n  ): (ArchiveEntry[Some, Any], ZStream[Any, Throwable, Byte]) =\n    (ArchiveEntry(name, Some(content.length.toLong)), ZStream.fromIterable(content))\n\n}\n'})}),"\n",(0,o.jsx)(s.h2,{id:"running-the-tests",children:"Running the tests"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-shell",children:'SBT_OPTS="-Xmx4G -XX:+UseG1GC" sbt test\n'})})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>n,x:()=>a});var i=r(96540);const o={},t=i.createContext(o);function n(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);