"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[73450],{51434:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"overview/running-effects","title":"Running Effects","description":"ZIO effects are precise plans that describe a computation or interaction. Ultimately, every effect must be executed by the ZIO runtime.","source":"@site/docs/overview/running-effects.md","sourceDirName":"overview","slug":"/overview/running-effects","permalink":"/overview/running-effects","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/overview/running-effects.md","tags":[],"version":"current","frontMatter":{"id":"running-effects","title":"Running Effects"},"sidebar":"overview_sidebar","previous":{"title":"Basic Concurrency","permalink":"/overview/basic-concurrency"},"next":{"title":"Performance","permalink":"/overview/performance"}}');var i=t(74848),o=t(28453);const s={id:"running-effects",title:"Running Effects"},c=void 0,a={},l=[{value:"App",id:"app",level:2},{value:"Default Runtime",id:"default-runtime",level:2},{value:"Custom Runtime",id:"custom-runtime",level:2},{value:"Error Reporting",id:"error-reporting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["ZIO effects are precise plans that ",(0,i.jsx)(n.em,{children:"describe"})," a computation or interaction. Ultimately, every effect must be ",(0,i.jsx)(n.em,{children:"executed"})," by the ZIO runtime."]}),"\n",(0,i.jsx)(n.p,{children:"In this section, you will learn about the several ways that ZIO provides for you to execute effects in your application."}),"\n",(0,i.jsx)(n.h2,{id:"app",children:"App"}),"\n",(0,i.jsxs)(n.p,{children:["If you construct a single effect for your whole program, the most natural way to run the effect is to extend ",(0,i.jsx)(n.code,{children:"ZIOAppDefault"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This class provides Scala with a JVM-compatible main function, so it can be called from IDEs and launched from the command-line. All you have to do is implement the ",(0,i.jsx)(n.code,{children:"run"})," method by returning the effect to run."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import zio._\nimport zio.Console._\n\nobject MyApp extends ZIOAppDefault {\n\n  def run =\n    for {\n      _    <- printLine("Hello! What is your name?")\n      name <- readLine\n      _    <- printLine(s"Hello, ${name}, welcome to ZIO!")\n    } yield ()\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you are using a custom environment for your application, you will have to supply your environment to the effect (using ",(0,i.jsx)(n.code,{children:"ZIO#provideEnvironment"})," or, if you are using layers, ",(0,i.jsx)(n.code,{children:"ZIO#provide"}),") before you return it from ",(0,i.jsx)(n.code,{children:"run"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ZIOAppDefault"})," does not know how to supply custom environments."]}),"\n",(0,i.jsx)(n.h2,{id:"default-runtime",children:"Default Runtime"}),"\n",(0,i.jsx)(n.p,{children:"Most applications are not greenfield, meaning they must integrate with legacy code and procedural libraries and frameworks."}),"\n",(0,i.jsxs)(n.p,{children:["In these cases, a better solution for running effects is to create a ",(0,i.jsx)(n.code,{children:"Runtime"}),", which can be passed around and used to run effects wherever required."]}),"\n",(0,i.jsxs)(n.p,{children:["ZIO contains a default runtime called ",(0,i.jsx)(n.code,{children:"Runtime.default"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"To access it, merely use"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"val runtime = Runtime.default\n"})}),"\n",(0,i.jsx)(n.p,{children:"Once you have a runtime, you can use it to execute effects:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'Unsafe.unsafe { implicit unsafe =>\n    runtime.unsafe.run(ZIO.attempt(println("Hello World!"))).getOrThrowFiberFailure()\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In addition to ",(0,i.jsx)(n.code,{children:"run"}),", which is for synchronous execution, there are other methods available on ",(0,i.jsx)(n.code,{children:"Runtime"})," that support asynchronous execution."]}),"\n",(0,i.jsx)(n.h2,{id:"custom-runtime",children:"Custom Runtime"}),"\n",(0,i.jsxs)(n.p,{children:["If you are using a custom environment for your application, you may find it useful to create a ",(0,i.jsx)(n.code,{children:"Runtime"})," specifically tailored for that environment."]}),"\n",(0,i.jsxs)(n.p,{children:["A custom ",(0,i.jsx)(n.code,{children:"Runtime[R]"})," can be created with a ",(0,i.jsx)(n.code,{children:"ZEnvironment[R]"})," (which holds the context required in order to execute your effects), as well as fiber refs and runtime flags (which can generally be set to default values)."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, the following creates a ",(0,i.jsx)(n.code,{children:"Runtime"})," that can provide an ",(0,i.jsx)(n.code,{children:"Int"})," to effects :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"val myRuntime: Runtime[Int] = \n  Runtime(ZEnvironment[Int](42), FiberRefs.empty, RuntimeFlags.default)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-reporting",children:"Error Reporting"}),"\n",(0,i.jsx)(n.p,{children:"The ZIO runtime system automatically logs all errors encountered when executing your effects, so long as those errors are not handled by your ZIO code."}),"\n",(0,i.jsxs)(n.p,{children:["You can specify a custom logger easily using ",(0,i.jsx)(n.em,{children:"ZIO Logging"}),", which can intercept these logged errors and handle them as configured by your logging backend."]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"If you are comfortable with running effects, congratulations!"}),"\n",(0,i.jsx)(n.p,{children:"You are now ready to dive into other sections on the ZIO website covering data types, use cases, and interop with other systems."}),"\n",(0,i.jsx)(n.p,{children:"Refer to the Scaladoc for detailed documentation on all the core ZIO types and methods."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);