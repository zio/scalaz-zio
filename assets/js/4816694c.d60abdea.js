"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[49058],{46622:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"reference/error-management/types/failures","title":"Failures","description":"When writing ZIO application, we can model a failure, using the ZIO.fail constructor:","source":"@site/docs/reference/error-management/types/failures.md","sourceDirName":"reference/error-management/types","slug":"/reference/error-management/types/failures","permalink":"/reference/error-management/types/failures","draft":false,"unlisted":false,"editUrl":"https://github.com/zio/zio/edit/series/2.x/docs/reference/error-management/types/failures.md","tags":[],"version":"current","frontMatter":{"id":"failures","title":"Failures"},"sidebar":"reference-sidebar","previous":{"title":"Three Types of Errors","permalink":"/reference/error-management/types/"},"next":{"title":"Defects","permalink":"/reference/error-management/types/defects"}}');var i=r(74848),a=r(28453);const s={id:"failures",title:"Failures"},c=void 0,o={},l=[];function d(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["When writing ZIO application, we can model a failure, using the ",(0,i.jsx)(n.code,{children:"ZIO.fail"})," constructor:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:"trait ZIO {\n  def fail[E](error: => E): ZIO[Any, E, Nothing]\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Let's try to model some failures using this constructor:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import zio._\n\nval f1: ZIO[Any, String, Nothing] = ZIO.fail("Oh uh!")\nval f2: ZIO[Any, String, Int]     = ZIO.succeed(5) *> ZIO.fail("Oh uh!")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now, let's try to run a failing effect and see what happens:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import zio._\n\nobject MainApp extends ZIOAppDefault {\n  def run = ZIO.succeed(5) *> ZIO.fail("Oh uh!")\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This will crash the application and print the following stack trace:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'timestamp=2022-03-08T17:55:50.002161369Z level=ERROR thread=#zio-fiber-0 message="Exception in thread "zio-fiber-2" java.lang.String: Oh uh!\n\tat <empty>.MainApp.run(MainApp.scala:4)"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We can also model a failure using ",(0,i.jsx)(n.code,{children:"Exception"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'val f3: ZIO[Any, Exception, Nothing] =\n  ZIO.fail(new Exception("Oh uh!"))\n'})}),"\n",(0,i.jsx)(n.p,{children:"Or using user-defined failure types (domain errors):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-scala",children:'import zio._\n\ncase class NegativeNumberException(msg: String) extends Exception(msg)\n\ndef validateNonNegative(input: Int): ZIO[Any, NegativeNumberException, Int] =\n  if (input < 0)\n    ZIO.fail(NegativeNumberException(s"entered negative number: $input"))\n  else\n    ZIO.succeed(input)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the above examples, we can see that the type of the ",(0,i.jsx)(n.code,{children:"validateNonNegative"})," function is ",(0,i.jsx)(n.code,{children:"ZIO[Any, NegativeNumberException, Int]"}),". It means this is an exceptional effect, which may fail with the type of ",(0,i.jsx)(n.code,{children:"NegativeNumberException"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ZIO.fail"})," constructor is somehow the moral equivalent of ",(0,i.jsx)(n.code,{children:"throw"})," for pure codes. We will discuss this ",(0,i.jsx)(n.a,{href:"/reference/error-management/imperative-vs-declarative",children:"further"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var t=r(96540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);